<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Scraping a Feature Together</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="../assets/built/screen.css?v=95ec2e62e8">

    <link rel="canonical" href="index.html">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="amp/index.html">
    
    <meta property="og:site_name" content="wdziemia">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Scraping a Feature Together">
    <meta property="og:description" content="YQL (Yahoo Query Language) allows you to do amazing things, and has many feeds for a developer to play with. In Peak Stocks, we use it for Option Chains and it works beautifully. An additional feature that we'd thought of was expanding social media feeds. We've gotten a lot of">
    <meta property="og:url" content="//wdziemia.github.io/the-cool-kids-way-to-scrape-pages/">
    <meta property="article:published_time" content="2013-03-21T12:24:00.000Z">
    <meta property="article:modified_time" content="2020-12-22T20:39:13.000Z">
    <meta property="article:tag" content="YQL">
    <meta property="article:tag" content="Scraping">
    <meta property="article:tag" content="Data">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Scraping a Feature Together">
    <meta name="twitter:description" content="YQL (Yahoo Query Language) allows you to do amazing things, and has many feeds for a developer to play with. In Peak Stocks, we use it for Option Chains and it works beautifully. An additional feature that we'd thought of was expanding social media feeds. We've gotten a lot of">
    <meta name="twitter:url" content="//wdziemia.github.io/the-cool-kids-way-to-scrape-pages/">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Walter Dziemianczyk">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="YQL, Scraping, Data">
    <meta name="twitter:site" content="@wdziemia">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "wdziemia",
        "url": "//wdziemia.github.io/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://static.ghost.org/v1.0.0/images/ghost-logo.svg"
        }
    },
    "author": {
        "@type": "Person",
        "name": "Walter Dziemianczyk",
        "url": "//wdziemia.github.io/author/walter/",
        "sameAs": []
    },
    "headline": "Scraping a Feature Together",
    "url": "//wdziemia.github.io/the-cool-kids-way-to-scrape-pages/",
    "datePublished": "2013-03-21T12:24:00.000Z",
    "dateModified": "2020-12-22T20:39:13.000Z",
    "keywords": "YQL, Scraping, Data",
    "description": "YQL (Yahoo Query Language [https://en.wikipedia.org/wiki/Yahoo!_Query_Language])\nallows you to do amazing things, and has many feeds for a developer to play\nwith. In Peak Stocks, we use it for Option Chains and it works beautifully. An\nadditional feature that we&#x27;d thought of was expanding social media feeds. We&#x27;ve\ngotten a lot of requests for twitter and thought, why not the yahoo message\nboards too? This is where YQL comes into play. \n\nYQL has community tables, which aren&#x27;t actual SQL tables. T",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "//wdziemia.github.io/"
    }
}
    </script>

    <meta name="generator" content="Ghost 3.40">
    <link rel="alternate" type="application/rss+xml" title="wdziemia" href="../rss/index.rss">
    <style>
.author-list,
.author-name,
.post-card-byline-content span:first-of-type {
    display: none;
}
.post-card-byline-content {
    margin-left: 0;
}
</style>

</head>
<body class="post-template tag-yql tag-scraping tag-data">

    <div class="site-wrapper">

        

<header class="site-header">
    <div class="outer site-nav-main">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left-wrapper">
        <div class="site-nav-left">
                <a class="site-nav-logo" href="../index.html"><img src="https://static.ghost.org/v1.0.0/images/ghost-logo.svg" alt="wdziemia"></a>
            <div class="site-nav-content">
                    <ul class="nav">
    <li class="nav-home"><a href="../index.html">Home</a></li>
</ul>

                    <span class="nav-post-title ">Scraping a Feature Together</span>
            </div>
        </div>
    </div>
    <div class="site-nav-right">
            <div class="social-links">
                    <a class="social-link social-link-tw" href="https://twitter.com/wdziemia" title="Twitter" target="_blank" rel="noopener"><svg xmlns="//www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"></path></svg>
</a>
            </div>
                <a class="rss-button" href="https://feedly.com/i/subscription/feed///wdziemia.github.io/rss/" title="RSS" target="_blank" rel="noopener"><svg xmlns="//www.w3.org/2000/svg" viewbox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"></circle><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"></path></svg>
</a>

    </div>
</nav>
    </div>
</div></header>


<main id="site-main" class="site-main outer">
    <div class="inner">

        <article class="post-full post tag-yql tag-scraping tag-data no-image no-image">

            <header class="post-full-header">

                <section class="post-full-tags">
                    <a href="../tag/yql/index.html">YQL</a>
                </section>

                <h1 class="post-full-title">Scraping a Feature Together</h1>


                <div class="post-full-byline">

                    <section class="post-full-byline-content">

                        <ul class="author-list">
                            <li class="author-list-item">

                                <div class="author-card">
                                    <div class="author-profile-image"><svg viewbox="0 0 24 24" xmlns="//www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z" fill="#FFF"></path></g></svg>
</div>
                                    <div class="author-info">
                                        <h2>Walter Dziemianczyk</h2>
                                        <p>Read <a href="../author/walter/index.html">more posts</a> by this author.</p>
                                    </div>
                                </div>

                                <a href="../author/walter/index.html" class="author-avatar author-profile-image"><svg viewbox="0 0 24 24" xmlns="//www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z" fill="#FFF"></path></g></svg>
</a>

                            </li>
                        </ul>

                        <section class="post-full-byline-meta">
                            <h4 class="author-name"><a href="../author/walter/index.html">Walter Dziemianczyk</a></h4>
                            <div class="byline-meta-content">
                                <time class="byline-meta-date" datetime="2013-03-21">21 Mar 2013</time>
                                <span class="byline-reading-time"><span class="bull">•</span> 2 min read</span>
                            </div>
                        </section>

                    </section>


                </div>
            </header>


            <section class="post-full-content">
                <div class="post-content">
                    <p>YQL (<a href="https://en.wikipedia.org/wiki/Yahoo!_Query_Language">Yahoo Query Language</a>) allows you to do amazing things, and has many feeds for a developer to play with. In Peak Stocks, we use it for Option Chains and it works beautifully. An additional feature that we'd thought of was expanding social media feeds. We've gotten a lot of requests for twitter and thought, why not the yahoo message boards too? This is where YQL comes into play. </p><p>YQL has community tables, which aren't actual SQL tables. These "tables" are just XML files that scrape pages or using existing feeds and return a response object that is formatted to your liking. Within YQL console, these XML files are passed off a tables making it seem like your actually accessing a database. Anyway, the community tables allow anyone to create their own custom table, be it through the methods mentioned earlier. The finance message boards dont have an open API so i had to use the page scraping method. Having not a lick of experience in doing any of this, it took me a couple of hours to get it going, with countless attempts of trial and error (view the commit history, you'll see). Once i finally got some data to work with, it got easier and easier. The final XML file can be found on my GitHub <a href="https://www.blogger.com/u/1/blog/post/edit/575225956679068977/6613830476794116182#">here</a>. </p><p>The structure of the JavaScript is very simple, its a try-catch block and 2 methods. One method gets the next-page URL and the other loops through the <code>&lt;tr&gt;</code> elements within <code>&lt;tbody&gt;</code> and appends the rows to a <code>&lt;messages&gt;</code> element. </p><figure class="kg-card kg-image-card kg-card-hascaption"><img src="../content/images/2020/12/image.png" class="kg-image" alt srcset="../content/images/size/w600/2020/12/image.png 600w, ../content/images/size/w1000/2020/12/image.png 1000w, ../content/images/2020/12/image.png 1241w" sizes="(min-width: 720px) 720px"><figcaption>Output for <code>GOOG</code></figcaption></figure><p>Within the YQL console, you can have two YQL queries to choose from:</p><pre><code class="language-SQL">SELECT * FROM messageboard WHERE symbol='GOOG';</code></pre><ul><li>The most basic YQL query, giving you page 1 of the message board.</li></ul><pre><code class="language-SQL">SELECT * FROM messageboard WHERE symbol='GOOG' AND page=$URL;</code></pre><ul><li>The second query allows you to pick which page you'd like. The page postfix is given in the initial URL request using the YQL command above (e.g. <code>page = '/mb/forumview/?&amp;bn=12b865d6-8061-30c4-86c1-40adf7076aee&amp;page=2';</code>).</li></ul><p>As it stands, the file only parses through the a message board for a particular stock, getting all the threads within it. While it does provide you the the thread link, there is no way to get a feed for that individual thread.....yet. <br><br>The next step is to create another file that handles an individual thread. This shouldn't be difficult since I have experience from creating this one. </p><p>Until next time, <br><br>W</p>
                </div>
            </section>



        </article>

    </div>
</main>

<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
                <article class="read-next-card">
                    <header class="read-next-card-header">
                        <h3><span>More in</span> <a href="../tag/yql/index.html">YQL</a></h3>
                    </header>
                    <div class="read-next-card-content">
                        <ul>
                            <li>
                                <h4><a href="../temere-fitness-catchy-slogan-goes-here/index.html">Temere Fitness</a></h4>
                                <div class="read-next-card-meta">
                                    <p><time datetime="2013-02-28">28 Feb 2013</time> –
                                        3 min read</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <footer class="read-next-card-footer">
                        <a href="../tag/yql/index.html">1 post
                            →</a>
                    </footer>
                </article>


                <article class="post-card post tag-concept tag-yql no-image no-image">


    <div class="post-card-content">

        <a class="post-card-content-link" href="../temere-fitness-catchy-slogan-goes-here/index.html">

            <header class="post-card-header">
                    <div class="post-card-primary-tag">Concept</div>
                <h2 class="post-card-title">Temere Fitness</h2>
            </header>

            <section class="post-card-excerpt">
                    <p>"Catchy slogan goes here" I've been going to the gym recently and noticed that i basically do the same exercises each time. I thought to myself "Why cant there be an app that gives me a list of workouts so that I dont get</p>
            </section>

        </a>

        <footer class="post-card-meta">
            <ul class="author-list">
                <li class="author-list-item">
            
                    <div class="author-name-tooltip">
                        Walter Dziemianczyk
                    </div>
            
                    <a href="../author/walter/index.html" class="static-avatar author-profile-image"><svg viewbox="0 0 24 24" xmlns="//www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z" fill="#FFF"></path></g></svg>
</a>
                </li>
            </ul>
            <div class="post-card-byline-content">
                <span><a href="../author/walter/index.html">Walter Dziemianczyk</a></span>
                <span class="post-card-byline-date"><time datetime="2013-02-28">28 Feb 2013</time> <span class="bull">•</span> 3 min read</span>
            </div>
        </footer>

    </div>

</article>
        </div>
    </div>
</aside>




        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="../index.html">wdziemia</a> © 2020</section>
                <nav class="site-footer-nav">
                    <a href="../index.html">Latest Posts</a>
                    
                    <a href="https://twitter.com/wdziemia" target="_blank" rel="noopener">Twitter</a>
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>


    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous">
    </script>
    <script src="../assets/built/casper.js?v=95ec2e62e8"></script>

    <script>
        // Parse the URL parameter
        function getParameterByName(name, url) {
            if (!url) url = window.location.href;
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        // Give the parameter a variable name
        var action = getParameterByName('action');
        var success = getParameterByName('success');

        $(document).ready(function () {
            if (action == 'subscribe' && (success === null || success === 'true')) {
                $('body').addClass('subscribe-success');
            }

            if (action == 'subscribe' && success === 'false') {
                $('body').addClass('subscribe-failure');
            }

            $('.subscribe-notification .subscribe-close-button').click(function () {
                $('.subscribe-notification').addClass('close');
            });

            // Reset form on opening subscrion overlay
            $('.subscribe-button').click(function() {
                $('.subscribe-overlay form').removeClass();
                $('.subscribe-email').val('');
            });
        });
    </script>

    <script>
    $(document).ready(function () {
        // FitVids - start
        var $postContent = $(".post-full-content");
        $postContent.fitVids();
        // FitVids - end

        // Replace nav with title on scroll - start
        Casper.stickyNavTitle({
            navSelector: '.site-nav-main',
            titleSelector: '.post-full-title',
            activeClass: 'nav-post-title-active'
        });
        // Replace nav with title on scroll - end

        // Hover on avatar
        var hoverTimeout;
        $('.author-list-item').hover(function () {
            var $this = $(this);

            clearTimeout(hoverTimeout);

            $('.author-card').removeClass('hovered');
            $(this).children('.author-card').addClass('hovered');

        }, function () {
            var $this = $(this);

            hoverTimeout = setTimeout(function () {
                $this.children('.author-card').removeClass('hovered');
            }, 800);
        });
    });
</script>


    

</body>
</html>